{{extend 'layout.html'}}
<div class="page-header">
    <h1>Road Permit<small><i class="ace-icon fa fa-angle-double-right"></i> a list of road permit notification</small></h1>
</div>

{{=table}} 

<script>
$(document).ready(function() { 
    var today = new Date();
    var date = today.getFullYear()+''+(today.getMonth()+1)+''+today.getDate();
    var time = today.getHours() + "" + today.getMinutes() + "" + today.getSeconds();
    var CurrentDateTime = date+''+time;
    var myTable = $('table.table').DataTable({
        dom: 'Bfrtip',
        buttons: [
        {
            extend: 'excelHtml5',
            text: 'Export to Excel',
            title: CurrentDateTime
          
        }],        
        
        "columnDefs": [{
            "searchable": false,
            "orderable": false,
            "targets": 0
        }],

        "order": [[1, 'asc']]
    });

    myTable.on('order.dt search.dt', function () {
        myTable.table(this).column(0, {search:'applied', order:'applied'}).nodes().each(function (cell, i) {
            cell.innerHTML = i+1;
        });
    }).draw();

});
</script>
