{{extend 'layout.html'}} <h2 align="center">Repair & Maintenance Report</h1> {{=form}} {{if grand_total > 0:}}{{=LOAD('FuelReports', 'btn_report.load', ajax=False)}}{{pass}} </br></br> <div id="target_warpper"><div id="target"> <table width = '100%'> <tr> <td valign="top" width="60%"> {{=table}} </td> <td width = '2%'></td> <td valign="top" width = '38%'> {{=i}} </td> </tr> </table> </div> </div> {{if grand_total > 0:}} <div id="vehicle_chart" style="min-width: 310px; height: 400px; margin: 0 auto"></div> {{pass}} <script type="text/javascript">function PrintContent(){var b=document.getElementById("target_warpper"),a=window.open("","PrintWindow","width = 1100,height=700,top=50,left=50,toolbars=no,scrollbars=yes,status=no,resizable=yes");a.document.writeln("<!DOCTYPE html>");a.document.writeln("<html><head><title>Vehicle Management System Report</title>");a.document.writeln('<link rel="stylesheet" type="text/css" href="{{=URL("static", "css/tablereport.css")}}">');a.document.writeln('</head><body style = "font-size:80%;font-family: Tahoma, Arial, serif; margin:10px;width:98%;height:100%;">'); a.document.writeln('<img src="{{=URL("static", "images/header_report.jpg")}}"></img>');a.document.writeln("<hr></br>");a.document.writeln("<h2 align = center>Repair & Maintenance Report</h2>");a.document.writeln(b.innerHTML);a.document.writeln("</body></html>");a.document.close();a.focus();a.print();a.close()};</script> <script type="text/javascript"> $(function () { $('#vehicle_chart').highcharts({ chart: { type: 'line'}, title: { text: 'Summary Chart' }, subtitle: { text: 'Vehicle Repair & Maintenance Expenses: {{=form.vars.start_date.strftime("%Y/%m/%d") if form.vars.start_date else 0}} - {{=form.vars.end_date.strftime("%Y/%m/%d") if form.vars.end_date else 0}}' }, xAxis: { categories: [ {{for y in veh_query:}} '{{=y.invoice_date}}', {{pass}} ] }, yAxis: { min: 0, title: { text: 'Expenses' } }, tooltip: { headerFormat: '<span style="font-size:10px">Date: {point.key}</span><table>', pointFormat: '<tr><td style="font-size:10px; color:{series.color};padding:0">{series.name}: </td>' + '<td style="font-size:10px;padding:0"><b>{point.y}</b></td></tr>', footerFormat: '</table>', shared: true, useHTML: true }, plotOptions: { column: { pointPadding: 0.2, borderWidth: 0 } }, credits: {enabled: false}, series: [{ name: 'Amount', data: [ {{for x in veh_query:}} {{=x.total_amount or 0}}, {{pass}} ] }] }); }); </script>